import{a as _e}from"./chunk-Q4LZ5O3O.js";import{a as he}from"./chunk-GHEE6D72.js";import"./chunk-ZYSJW6BK.js";import{Ba as oe,La as re,Ma as ce,Na as le,Oa as me,P,Pa as se,Q as F,Qa as pe,R as W,Ra as de,S as j,Sa as ue,Ta as fe,U as L,X as O,b as N,ia as K,ka as U,la as G,ma as $,na as q,oa as z,pa as J,qa as Q,ra as X,sa as Y,ta as Z,ua as ee,va as te,wa as ie,xa as ne,ya as ae}from"./chunk-RDZLLZJG.js";import{d as H}from"./chunk-6PNJV7BV.js";import{$a as c,Cc as R,Eb as h,Mb as n,Nb as i,Ob as k,Pb as g,Qb as C,Sb as M,Vb as A,Xb as y,ab as w,gc as x,hc as l,ic as I,jc as d,mc as b,nc as v,oa as u,oc as E,pa as f,qb as B,tc as T,uc as S,wb as _}from"./chunk-LDMTKLXK.js";function ge(e,r){e&1&&k(0,"th",26)}function Ce(e,r){if(e&1){let t=M();n(0,"td",27)(1,"button",28),A("click",function(a){let m=u(t).$implicit;return y().onDelete(m.id),f(a.stopPropagation())}),n(2,"mat-icon"),l(3,"clear"),i()()()}}function Te(e,r){e&1&&(n(0,"th",26),l(1," ID "),i())}function Se(e,r){if(e&1&&(n(0,"td",27),l(1),i()),e&2){let t=r.$implicit;c(),d(" ",t.id," ")}}function De(e,r){e&1&&(n(0,"th",26),l(1),T(2,"translate"),i()),e&2&&(c(),d(" ",S(2,1,"firstname")," "))}function we(e,r){if(e&1&&(n(0,"td",27),l(1),i()),e&2){let t=r.$implicit;c(),d(" ",t.firstname," ")}}function ke(e,r){e&1&&(n(0,"th",26),l(1),T(2,"translate"),i()),e&2&&(c(),d(" ",S(2,1,"lastname")," "))}function Ae(e,r){if(e&1&&(n(0,"td",27),l(1),i()),e&2){let t=r.$implicit;c(),d(" ",t.lastname," ")}}function Me(e,r){e&1&&(n(0,"th",26),l(1),T(2,"translate"),i()),e&2&&(c(),d(" ",S(2,1,"username")," "))}function xe(e,r){if(e&1&&(n(0,"td",27),l(1),i()),e&2){let t=r.$implicit;c(),d(" ",t.username," ")}}function be(e,r){e&1&&(n(0,"th",26),l(1),T(2,"translate"),i()),e&2&&(c(),d(" ",S(2,1,"contact_type")," "))}function ve(e,r){if(e&1&&(n(0,"td",27),l(1),i()),e&2){let t=r.$implicit;c(),d(" ",t.contact_type," ")}}function Ee(e,r){e&1&&(n(0,"th",26),l(1),T(2,"translate"),i()),e&2&&(c(),d(" ",S(2,1,"contact")," "))}function ye(e,r){if(e&1&&(n(0,"td",27),l(1),i()),e&2){let t=r.$implicit;c(),d(" ",t.contact_contact," ")}}function Ie(e,r){e&1&&k(0,"tr",29)}function Ve(e,r){e&1&&(n(0,"tr",30)(1,"td",31),l(2),T(3,"translate"),i()()),e&2&&(c(2),I(S(3,1,"no_matching_data")))}function Be(e,r){if(e&1){let t=M();n(0,"tr",32),A("click",function(){let a=u(t).$implicit,m=y();return f(m.onUpdateClick(a.id))}),i()}}var Xe=(()=>{class e{constructor(t,s,a,m,o){this.getAccountsService=t,this.changeDetectorRef=s,this.snackBar=a,this.router=m,this.location=o,this.showedColumns=["delete","id","firstname","lastname","username","contact_type","contact_contact"],this.tableData=new ae,this.subscriptions=[],this.selectedDate=null,this.selectedTime=null,this.selectedTime2=null}ngAfterViewInit(){let t=this.getAccountsService.getAccounts.subscribe(s=>{this.tableData.data=s},s=>{console.error("Gre\u0161ka prilikom dohvatanja naloga:",s)});this.subscriptions.push(t),this.getAccountsService.firstLoad&&this.getAccountsService.getAllAccounts(),this.changeDetectorRef.detectChanges()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}refreshAccounts(){this.getAccountsService.getAllAccounts()}onDelete(t){this.snackBar.open("Are you sure?","OK",{duration:5e3,panelClass:["custom-snackbar"]}).onAction().subscribe(()=>{this.getAccountsService.deleteAccount(t)})}onUpdateClick(t){let s=this.router.createUrlTree(["/updateaccount",t]).toString();this.router.navigate([s])}applyFilter(){if(!this.selectedDate||!this.selectedTime){this.snackBar.open("Please select both date and time!","OK",{duration:3e3});return}console.log("Selected Date:",this.selectedDate),console.log("Selected Time:",this.selectedTime);let t=new Date(this.selectedDate),[s,a,m]=this.selectedTime.match(/(\d{1,2}):(\d{2}) (AM|PM)/)?.slice(1)||[],o=parseInt(s,10),p=parseInt(a,10);m==="PM"&&o!==12?o+=12:m==="AM"&&o===12&&(o=0),t.setHours(o,p,0,0),console.log("Selected timestamp:",t),this.tableData.data=this.tableData.data.filter(D=>{if(console.log("Account object:",D),console.log("registrationTimestamp:",D.registrationTimestamp),!D.registrationTimestamp)return console.warn("Nalog nema validan registrationTimestamp:",D),!1;let V=new Date(D.registrationTimestamp);return isNaN(V.getTime())?(console.warn("Nevalidan datum u account.registrationTimestamp:",D.registrationTimestamp),!1):V>t}),this.changeDetectorRef.detectChanges()}applyFilter2(){if(!this.selectedDate||!this.selectedTime2){this.snackBar.open("Please select both date and time!","OK",{duration:3e3});return}console.log("Selected Date:",this.selectedDate),console.log("Selected Time:",this.selectedTime2);let t=new Date(this.selectedDate),s=this.selectedTime2.getHours(),a=this.selectedTime2.getMinutes();t.setHours(s,a,0,0);let m=t.toTimeString().slice(0,5);console.log("Selected Time (formatted):",m),console.log("Selected timestamp:",t),this.tableData.data=this.tableData.data.filter(o=>{if(console.log("Account object:",o),console.log("registrationTimestamp:",o.registrationTimestamp),!o.registrationTimestamp)return console.warn("Nalog nema validan registrationTimestamp:",o),!1;let p=new Date(o.registrationTimestamp);return isNaN(p.getTime())?(console.warn("Nevalidan datum u account.registrationTimestamp:",o.registrationTimestamp),!1):p>t}),this.changeDetectorRef.detectChanges()}static{this.\u0275fac=function(s){return new(s||e)(w(_e),w(R),w(he),w(oe),w(N))}}static{this.\u0275cmp=B({type:e,selectors:[["app-accounts"]],decls:56,vars:14,consts:[["datepicker",""],["timepicker",""],["picker",""],[1,"div-accounts"],[1,"filter-container"],["appearance","outline"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","placeholder","Select Time",3,"ngModelChange","ngxTimepicker","ngModel"],["matInput","",3,"ngModelChange","matTimepicker","ngModel"],["matTimepickerToggleIcon",""],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"table-accounts",3,"dataSource"],["matColumnDef","delete"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","username"],["matColumnDef","contact_type"],["matColumnDef","contact_contact"],["mat-header-row","",4,"matHeaderRowDef"],["class","mat-row",4,"matNoDataRow"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell"],["mat-row","",3,"click"]],template:function(s,a){if(s&1){let m=M();n(0,"div",3)(1,"div",4)(2,"mat-form-field",5)(3,"mat-label"),l(4,"Select Date"),i(),n(5,"input",6),E("ngModelChange",function(p){return u(m),v(a.selectedDate,p)||(a.selectedDate=p),f(p)}),i(),k(6,"mat-datepicker-toggle",7)(7,"mat-datepicker",null,0),i(),n(9,"mat-form-field",5)(10,"mat-label"),l(11,"Select Time"),i(),n(12,"input",8),E("ngModelChange",function(p){return u(m),v(a.selectedTime,p)||(a.selectedTime=p),f(p)}),i(),k(13,"ngx-material-timepicker",null,1),i(),n(15,"mat-form-field")(16,"mat-label"),l(17,"Pick a time"),i(),n(18,"input",9),E("ngModelChange",function(p){return u(m),v(a.selectedTime2,p)||(a.selectedTime2=p),f(p)}),i(),n(19,"mat-timepicker-toggle",7)(20,"mat-icon",10),l(21,"keyboard_arrow_down"),i()(),k(22,"mat-timepicker",null,2),i(),n(24,"button",11),A("click",function(){return u(m),f(a.applyFilter())}),l(25,"Filter"),i(),n(26,"button",11),A("click",function(){return u(m),f(a.applyFilter2())}),l(27,"Filter2"),i()(),n(28,"table",12),g(29,13),_(30,ge,1,0,"th",14)(31,Ce,4,0,"td",15),C(),g(32,16),_(33,Te,2,0,"th",14)(34,Se,2,1,"td",15),C(),g(35,17),_(36,De,3,3,"th",14)(37,we,2,1,"td",15),C(),g(38,18),_(39,ke,3,3,"th",14)(40,Ae,2,1,"td",15),C(),g(41,19),_(42,Me,3,3,"th",14)(43,xe,2,1,"td",15),C(),g(44,20),_(45,be,3,3,"th",14)(46,ve,2,1,"td",15),C(),g(47,21),_(48,Ee,3,3,"th",14)(49,ye,2,1,"td",15),C(),_(50,Ie,1,0,"tr",22)(51,Ve,4,3,"tr",23)(52,Be,1,0,"tr",24),i(),n(53,"button",25),A("click",function(){return u(m),f(a.refreshAccounts())}),l(54),T(55,"translate"),i()()}if(s&2){let m=x(8),o=x(14),p=x(23);c(5),h("matDatepicker",m),b("ngModel",a.selectedDate),c(),h("for",m),c(6),h("ngxTimepicker",o),b("ngModel",a.selectedTime),c(6),h("matTimepicker",p),b("ngModel",a.selectedTime2),c(),h("for",p),c(9),h("dataSource",a.tableData),c(22),h("matHeaderRowDef",a.showedColumns),c(2),h("matRowDefColumns",a.showedColumns),c(2),I(S(55,12,"refresh"))}},dependencies:[fe,j,L,O,U,W,P,F,G,$,q,Q,J,X,z,Y,K,Z,te,ne,ee,ie,re,ce,le,me,se,pe,de,ue,H],encapsulation:2})}}return e})();export{Xe as AccountsComponent};
