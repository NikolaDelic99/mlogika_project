"use strict";(self.webpackChunkuser_manager=self.webpackChunkuser_manager||[]).push([[486],{6486:(Y,f,r)=>{r.r(f),r.d(f,{AccountsComponent:()=>G});var E=r(3887),m=r(9159),t=r(4438),C=r(4953),k=r(5416),A=r(9012),M=r(177),u=r(9417),R=r(9631),p=r(2408),g=r(8834),I=r(9213),d=r(935),h=r(5084),T=r(2356),F=r(8018);function b(e,c){1&e&&t.nrm(0,"th",26)}function j(e,c){if(1&e){const n=t.RV6();t.j41(0,"td",27)(1,"button",28),t.bIt("click",function(a){const i=t.eBV(n).$implicit;return t.XpG().onDelete(i.id),t.Njj(a.stopPropagation())}),t.j41(2,"mat-icon"),t.EFF(3,"clear"),t.k0s()()()}}function P(e,c){1&e&&(t.j41(0,"th",26),t.EFF(1," ID "),t.k0s())}function S(e,c){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const n=c.$implicit;t.R7$(),t.SpI(" ",n.id," ")}}function O(e,c){1&e&&(t.j41(0,"th",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"firstname")," "))}function B(e,c){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const n=c.$implicit;t.R7$(),t.SpI(" ",n.firstname," ")}}function v(e,c){1&e&&(t.j41(0,"th",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lastname")," "))}function U(e,c){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const n=c.$implicit;t.R7$(),t.SpI(" ",n.lastname," ")}}function N(e,c){1&e&&(t.j41(0,"th",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"username")," "))}function $(e,c){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const n=c.$implicit;t.R7$(),t.SpI(" ",n.username," ")}}function V(e,c){1&e&&(t.j41(0,"th",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"contact_type")," "))}function K(e,c){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const n=c.$implicit;t.R7$(),t.SpI(" ",n.contact_type," ")}}function L(e,c){1&e&&(t.j41(0,"th",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"contact")," "))}function x(e,c){if(1&e&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&e){const n=c.$implicit;t.R7$(),t.SpI(" ",n.contact_contact," ")}}function y(e,c){1&e&&t.nrm(0,"tr",29)}function W(e,c){1&e&&(t.j41(0,"tr",30)(1,"td",31),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"no_matching_data")))}function w(e,c){if(1&e){const n=t.RV6();t.j41(0,"tr",32),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG();return t.Njj(i.onUpdateClick(a.id))}),t.k0s()}}let G=(()=>{class e{constructor(n,s,a,i,o){this.getAccountsService=n,this.changeDetectorRef=s,this.snackBar=a,this.router=i,this.location=o,this.showedColumns=["delete","id","firstname","lastname","username","contact_type","contact_contact"],this.tableData=new m.I6,this.subscriptions=[],this.selectedDate=null,this.selectedTime=null,this.selectedTime2=null}ngAfterViewInit(){const n=this.getAccountsService.getAccounts.subscribe(s=>{this.tableData.data=s},s=>{console.error("Gre\u0161ka prilikom dohvatanja naloga:",s)});this.subscriptions.push(n),this.getAccountsService.firstLoad&&this.getAccountsService.getAllAccounts(),this.changeDetectorRef.detectChanges()}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}refreshAccounts(){this.getAccountsService.getAllAccounts()}onDelete(n){this.snackBar.open("Are you sure?","OK",{duration:5e3,panelClass:["custom-snackbar"]}).onAction().subscribe(()=>{this.getAccountsService.deleteAccount(n)})}onUpdateClick(n){const s=this.router.createUrlTree(["/updateaccount",n]).toString();this.router.navigate([s])}applyFilter(){if(!this.selectedDate||!this.selectedTime)return void this.snackBar.open("Please select both date and time!","OK",{duration:3e3});console.log("Selected Date:",this.selectedDate),console.log("Selected Time:",this.selectedTime);const n=new Date(this.selectedDate),[s,a,i]=this.selectedTime.match(/(\d{1,2}):(\d{2}) (AM|PM)/)?.slice(1)||[];let o=parseInt(s,10);const l=parseInt(a,10);"PM"===i&&12!==o?o+=12:"AM"===i&&12===o&&(o=0),n.setHours(o,l,0,0),console.log("Selected timestamp:",n),this.tableData.data=this.tableData.data.filter(_=>{if(console.log("Account object:",_),console.log("registrationTimestamp:",_.registrationTimestamp),!_.registrationTimestamp)return console.warn("Nalog nema validan registrationTimestamp:",_),!1;const D=new Date(_.registrationTimestamp);return isNaN(D.getTime())?(console.warn("Nevalidan datum u account.registrationTimestamp:",_.registrationTimestamp),!1):D>n}),this.changeDetectorRef.detectChanges()}applyFilter2(){if(!this.selectedDate||!this.selectedTime2)return void this.snackBar.open("Please select both date and time!","OK",{duration:3e3});console.log("Selected Date:",this.selectedDate),console.log("Selected Time:",this.selectedTime2);const n=new Date(this.selectedDate),s=this.selectedTime2.getHours(),a=this.selectedTime2.getMinutes();n.setHours(s,a,0,0);const i=n.toTimeString().slice(0,5);console.log("Selected Time (formatted):",i),console.log("Selected timestamp:",n),this.tableData.data=this.tableData.data.filter(o=>{if(console.log("Account object:",o),console.log("registrationTimestamp:",o.registrationTimestamp),!o.registrationTimestamp)return console.warn("Nalog nema validan registrationTimestamp:",o),!1;const l=new Date(o.registrationTimestamp);return isNaN(l.getTime())?(console.warn("Nevalidan datum u account.registrationTimestamp:",o.registrationTimestamp),!1):l>n}),this.changeDetectorRef.detectChanges()}static{this.\u0275fac=function(s){return new(s||e)(t.rXU(C.K),t.rXU(t.gRc),t.rXU(k.UG),t.rXU(A.Ix),t.rXU(M.aZ))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-accounts"]],decls:56,vars:14,consts:[["datepicker",""],["timepicker",""],["picker",""],[1,"div-accounts"],[1,"filter-container"],["appearance","outline"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","placeholder","Select Time",3,"ngModelChange","ngxTimepicker","ngModel"],["matInput","",3,"ngModelChange","matTimepicker","ngModel"],["matTimepickerToggleIcon",""],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"table-accounts",3,"dataSource"],["matColumnDef","delete"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","username"],["matColumnDef","contact_type"],["matColumnDef","contact_contact"],["mat-header-row","",4,"matHeaderRowDef"],["class","mat-row",4,"matNoDataRow"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell"],["mat-row","",3,"click"]],template:function(s,a){if(1&s){const i=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"mat-form-field",5)(3,"mat-label"),t.EFF(4,"Select Date"),t.k0s(),t.j41(5,"input",6),t.mxI("ngModelChange",function(l){return t.eBV(i),t.DH7(a.selectedDate,l)||(a.selectedDate=l),t.Njj(l)}),t.k0s(),t.nrm(6,"mat-datepicker-toggle",7)(7,"mat-datepicker",null,0),t.k0s(),t.j41(9,"mat-form-field",5)(10,"mat-label"),t.EFF(11,"Select Time"),t.k0s(),t.j41(12,"input",8),t.mxI("ngModelChange",function(l){return t.eBV(i),t.DH7(a.selectedTime,l)||(a.selectedTime=l),t.Njj(l)}),t.k0s(),t.nrm(13,"ngx-material-timepicker",null,1),t.k0s(),t.j41(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Pick a time"),t.k0s(),t.j41(18,"input",9),t.mxI("ngModelChange",function(l){return t.eBV(i),t.DH7(a.selectedTime2,l)||(a.selectedTime2=l),t.Njj(l)}),t.k0s(),t.j41(19,"mat-timepicker-toggle",7)(20,"mat-icon",10),t.EFF(21,"keyboard_arrow_down"),t.k0s()(),t.nrm(22,"mat-timepicker",null,2),t.k0s(),t.j41(24,"button",11),t.bIt("click",function(){return t.eBV(i),t.Njj(a.applyFilter())}),t.EFF(25,"Filter"),t.k0s(),t.j41(26,"button",11),t.bIt("click",function(){return t.eBV(i),t.Njj(a.applyFilter2())}),t.EFF(27,"Filter2"),t.k0s()(),t.j41(28,"table",12),t.qex(29,13),t.DNE(30,b,1,0,"th",14)(31,j,4,0,"td",15),t.bVm(),t.qex(32,16),t.DNE(33,P,2,0,"th",14)(34,S,2,1,"td",15),t.bVm(),t.qex(35,17),t.DNE(36,O,3,3,"th",14)(37,B,2,1,"td",15),t.bVm(),t.qex(38,18),t.DNE(39,v,3,3,"th",14)(40,U,2,1,"td",15),t.bVm(),t.qex(41,19),t.DNE(42,N,3,3,"th",14)(43,$,2,1,"td",15),t.bVm(),t.qex(44,20),t.DNE(45,V,3,3,"th",14)(46,K,2,1,"td",15),t.bVm(),t.qex(47,21),t.DNE(48,L,3,3,"th",14)(49,x,2,1,"td",15),t.bVm(),t.DNE(50,y,1,0,"tr",22)(51,W,4,3,"tr",23)(52,w,1,0,"tr",24),t.k0s(),t.j41(53,"button",25),t.bIt("click",function(){return t.eBV(i),t.Njj(a.refreshAccounts())}),t.EFF(54),t.nI1(55,"translate"),t.k0s()()}if(2&s){const i=t.sdS(8),o=t.sdS(14),l=t.sdS(23);t.R7$(5),t.Y8G("matDatepicker",i),t.R50("ngModel",a.selectedDate),t.R7$(),t.Y8G("for",i),t.R7$(6),t.Y8G("ngxTimepicker",o),t.R50("ngModel",a.selectedTime),t.R7$(6),t.Y8G("matTimepicker",l),t.R50("ngModel",a.selectedTime2),t.R7$(),t.Y8G("for",l),t.R7$(9),t.Y8G("dataSource",a.tableData),t.R7$(22),t.Y8G("matHeaderRowDef",a.showedColumns),t.R7$(2),t.Y8G("matRowDefColumns",a.showedColumns),t.R7$(2),t.JRh(t.bMT(55,12,"refresh"))}},dependencies:[E.G,u.me,u.BC,u.vS,R.fg,p.rl,p.nJ,p.yw,g.$z,g.iY,m.Zl,m.cC,m.tL,m.KS,m.YV,m.$R,I.An,m.ji,m.YZ,m.ky,m.iL,m.NB,d.g6,d.EG,d.s8,h.Vh,h.bZ,h.bU,T.zk,T.v2,F.D9],encapsulation:2})}}return e})()}}]);