"use strict";(self.webpackChunkuser_manager=self.webpackChunkuser_manager||[]).push([[999],{999:(Y,u,e)=>{e.r(u),e.d(u,{ContactsComponent:()=>J});var f=e(3887),t=e(4438),C=e(138),l=e(5312),h=e(1626);let v=(()=>{class n{constructor(o){this.http=o,this.baseUrl=l.c.protocol+"//"+l.c.host+"/"+l.c.root}getContacts(o){return this.http.get(`${this.baseUrl+"/getContacts"}?accountId=${o}`)}static{this.\u0275fac=function(a){return new(a||n)(t.KVO(h.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var b=e(9012),k=e(5416);let g=(()=>{class n{constructor(o){this.http=o,this.baseUrl=l.c.protocol+"//"+l.c.host+"/"+l.c.root}deleteContact(o){return this.http.post(this.baseUrl+"/deleteContact",{id:o.toString()})}static{this.\u0275fac=function(a){return new(a||n)(t.KVO(h.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var R=e(177),p=e(2408),d=e(8834),F=e(2798),j=e(3),i=e(9159),D=e(9213),T=e(8018);function $(n,s){if(1&n&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&n){const o=s.$implicit;t.Y8G("value",o.id),t.R7$(),t.E5c(" ",o.firstname," ",o.lastname," - ",o.contact_type," ")}}function y(n,s){1&n&&t.nrm(0,"th",15)}function E(n,s){if(1&n){const o=t.RV6();t.j41(0,"td",16)(1,"button",17),t.bIt("click",function(c){const r=t.eBV(o).$implicit;return t.XpG().onDelete(r.id),t.Njj(c.stopPropagation())}),t.j41(2,"mat-icon"),t.EFF(3,"clear"),t.k0s()()()}}function I(n,s){1&n&&(t.j41(0,"th",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"contact_type")))}function S(n,s){if(1&n&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&n){const o=s.$implicit;t.R7$(),t.JRh(o.type)}}function U(n,s){1&n&&(t.j41(0,"th",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"contact")))}function V(n,s){if(1&n&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&n){const o=s.$implicit;t.R7$(),t.JRh(o.contact)}}function G(n,s){1&n&&(t.j41(0,"th",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"primary_contact")," "))}function x(n,s){if(1&n&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&n){const o=s.$implicit;t.R7$(),t.SpI(" ",o.primary_contact," ")}}function A(n,s){1&n&&t.nrm(0,"tr",18)}function N(n,s){1&n&&t.nrm(0,"tr",19)}let J=(()=>{class n{constructor(o,a,c,r,m){this.accountService=o,this.getContactService=a,this.router=c,this.snackBar=r,this.deleteContactService=m,this.accounts=[],this.contacts=[],this.displayedColumns=["delete","type","contact","primary_contact"],this.subscriptions=[]}ngAfterViewInit(){const o=this.accountService.getAccounts().subscribe(a=>{a.success?this.accounts=a.items:console.error("Greska prilikom dohvatanja naloga")},a=>{console.error("Desila se greska prilikom dohvatanja naloga:",a)});this.subscriptions.push(o)}onAccountClicked(o){const a=this.getContactService.getContacts(o).subscribe(c=>{c.success?this.contacts=c.items:console.error("Greska prilikom dohvatanja kontakta")},c=>{console.error("Desila se greska prilikom dohvatanja kontakta:",c)});this.subscriptions.push(a)}navigateToAddContact(){const o=this.contacts[0]?.account_id;if(!o)return void console.log("Nalog nije izabran!");const a=this.router.createUrlTree(["/add-contact",o]).toString();this.router.navigate([a])}onDelete(o){this.snackBar.open("Are you sure?","OK",{duration:5e3,panelClass:["custom-snackbar"]}).onAction().subscribe(()=>{console.log("ID = ",o);const c=this.deleteContactService.deleteContact(o).subscribe(()=>{console.log(`Kontakt sa ID-jem ${o} je obrisan.`)},r=>{console.error("Gre\u0161ka prilikom brisanja kontakta:",r)});this.subscriptions.push(c)})}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(C.u),t.rXU(v),t.rXU(b.Ix),t.rXU(k.UG),t.rXU(g))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-contacts"]],decls:28,vars:13,consts:[[1,"contacts-page"],["appearance","fill"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","delete"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","contact"],["matColumnDef","primary_contact"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,c){1&a&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"mat-form-field",1)(5,"mat-label"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"mat-select",2),t.bIt("selectionChange",function(m){return c.onAccountClicked(m.value)}),t.DNE(9,$,2,4,"mat-option",3),t.k0s()(),t.j41(10,"table",4),t.qex(11,5),t.DNE(12,y,1,0,"th",6)(13,E,4,0,"td",7),t.bVm(),t.qex(14,8),t.DNE(15,I,3,3,"th",6)(16,S,2,1,"td",7),t.bVm(),t.qex(17,9),t.DNE(18,U,3,3,"th",6)(19,V,2,1,"td",7),t.bVm(),t.qex(20,10),t.DNE(21,G,3,3,"th",6)(22,x,2,1,"td",7),t.bVm(),t.DNE(23,A,1,0,"tr",11)(24,N,1,0,"tr",12),t.k0s(),t.j41(25,"button",13),t.bIt("click",function(){return c.navigateToAddContact()}),t.EFF(26),t.nI1(27,"translate"),t.k0s()()),2&a&&(t.R7$(2),t.JRh(t.bMT(3,7,"contacts")),t.R7$(4),t.JRh(t.bMT(7,9,"choose_account")),t.R7$(3),t.Y8G("ngForOf",c.accounts),t.R7$(),t.Y8G("dataSource",c.contacts),t.R7$(13),t.Y8G("matHeaderRowDef",c.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",c.displayedColumns),t.R7$(2),t.JRh(t.bMT(27,11,"add_contact")))},dependencies:[f.G,R.Sq,p.rl,p.nJ,d.$z,d.iY,F.VO,j.wT,i.Zl,i.cC,i.tL,i.KS,i.YV,i.$R,D.An,i.ji,i.YZ,i.iL,i.NB,T.D9],encapsulation:2})}}return n})()}}]);