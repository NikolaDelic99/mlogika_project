import{a as v}from"./chunk-KBMBIZXK.js";import{Aa as V,O as x,Q as E,R as F,S as s,Sa as R,T as B,U as M,X as N,Y as j,Z as A,ca as q,ea as D,h as I,ja as G,ka as w,v as _,ya as T}from"./chunk-UKH5J6BE.js";import{d as S}from"./chunk-6PNJV7BV.js";import{$ as g,$a as a,Eb as u,Mb as r,Nb as e,Ob as f,Vb as C,ab as d,ea as b,hc as c,ic as p,qb as y,tc as m,uc as l}from"./chunk-LDMTKLXK.js";var U=(()=>{class o{constructor(t){this.http=t,this.baseUrl=v.protocol+"//"+v.host+"/"+v.root}registerContact(t){return this.http.post(this.baseUrl+"/addContact",t)}static{this.\u0275fac=function(i){return new(i||o)(b(I))}}static{this.\u0275prov=g({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Z=(()=>{class o{constructor(t,i,n,h){this.fb=t,this.addContactService=i,this.router=n,this.route=h,this.accountId=this.route.snapshot.paramMap.get("account_id")||"",console.log(this.accountId),this.registerForm=this.fb.group({account_id:[this.accountId||"",s.required],type:["",s.required],contact:["",[s.required]],primary_contact:["",[s.required]]})}onSubmit(t){if(t.valid){let i={account_id:Number(t.value.account_id),type:t.value.type,contact:t.value.contact,primary_contact:t.value.primary_contact==="true"||t.value.primary_contact===!0};console.log("Sending contact data:",i),this.addContactService.registerContact(i).subscribe(n=>{console.log("Contact registered:",n),this.router.navigate(["/contacts"])},n=>{console.error("Error registering contact:",n)})}else console.error("Form is invalid")}static{this.\u0275fac=function(i){return new(i||o)(d(q),d(U),d(V),d(T))}}static{this.\u0275cmp=y({type:o,selectors:[["app-add-contact"]],decls:33,vars:27,consts:[[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","id","account_id","formControlName","account_id",3,"readonly"],["id","type","formControlName","type"],["value","phone"],["value","email"],["value","address"],["matInput","","id","contact","formControlName","contact"],["matInput","","id","primary_contact","formControlName","primary_contact"],["mat-button","","type","submit",3,"disabled"]],template:function(i,n){i&1&&(r(0,"form",0),C("ngSubmit",function(){return n.onSubmit(n.registerForm)}),r(1,"mat-form-field",1)(2,"mat-label"),c(3),m(4,"translate"),e(),f(5,"input",2),e(),r(6,"mat-form-field",1)(7,"mat-label"),c(8),m(9,"translate"),e(),r(10,"mat-select",3)(11,"mat-option",4),c(12),m(13,"translate"),e(),r(14,"mat-option",5),c(15),m(16,"translate"),e(),r(17,"mat-option",6),c(18),m(19,"translate"),e()()(),r(20,"mat-form-field",1)(21,"mat-label"),c(22),m(23,"translate"),e(),f(24,"input",7),e(),r(25,"mat-form-field",1)(26,"mat-label"),c(27),m(28,"translate"),e(),f(29,"input",8),e(),r(30,"button",9),c(31),m(32,"translate"),e()()),i&2&&(u("formGroup",n.registerForm),a(3),p(l(4,11,"account_id")),a(2),u("readonly",!0),a(3),p(l(9,13,"contact_type")),a(4),p(l(13,15,"phone")),a(3),p(l(16,17,"email")),a(3),p(l(19,19,"address")),a(4),p(l(23,21,"contact")),a(5),p(l(28,23,"primary_contact")),a(3),u("disabled",!n.registerForm.valid),a(),p(l(32,25,"register_contact")))},dependencies:[R,N,F,B,M,j,A,G,E,x,w,D,_,S],encapsulation:2})}}return o})();export{Z as AddContactComponent};
