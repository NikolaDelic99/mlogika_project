import{a as l}from"./chunk-DXK57YMR.js";import{$ as a,D as n,ea as u,m as i,q as r,t as c}from"./chunk-LDMTKLXK.js";var m=(()=>{class o{constructor(e){this.accountsService=e,this.subscriptions=[],this.firstLoad=!0,this.init()}init(){this.getAccountsSubject=new i(null),this.getAccounts=this.getAccountsSubject.asObservable()}getAllAccounts(){let e=this.accountsService.getAccounts().subscribe(t=>{t.success?this.getAccountsSubject.next(t.items):console.error("Desila se gre\u0161ka prilikom dohvatanja naloga.")},t=>{console.error("Gre\u0161ka prilikom dohvatanja naloga:",t)});this.subscriptions.push(e),this.firstLoad=!1}deleteAccount(e){let t=this.accountsService.deleteAccount(e).subscribe(()=>{console.log(`Nalog sa ID-jem ${e} je obrisan.`),this.getAllAccounts()},s=>{console.error("Gre\u0161ka prilikom brisanja naloga:",s)});this.subscriptions.push(t)}getSingleAccount(e){return this.accountsService.getAccount(e).pipe(c(t=>{if(t.success&&t.items.length>0)return t.items[0];throw new Error("Gre\u0161ka prilikom dohvatanja naloga")}),n(t=>(console.error("Gre\u0161ka prilikom dohvatanja jednog naloga:",t),r(t))))}updateAccount(e){let t=this.accountsService.updateAccount(e).subscribe(s=>{s.success?(console.log("Nalog je uspe\u0161no a\u017Euriran:",s.items),this.getAllAccounts()):console.error("Gre\u0161ka prilikom a\u017Euriranja naloga.")},s=>{console.error("Gre\u0161ka prilikom a\u017Euriranja naloga:",s)});this.subscriptions.push(t)}unsubscribeAll(){this.subscriptions.forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(t){return new(t||o)(u(l))}}static{this.\u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{m as a};
